%------------------------------------------------------------------------------
%	SECTION
%------------------------------------------------------------------------------
\section{Módulos de biblioteca sAPI}
\label{sec:modelLibrary}

Se utilizan las siguientes premisas para guiar el diseño de los módulos de la biblioteca sAPI:

\begin{itemize}
\item
%A nivel de biblioteca:
Utilización de nombres sencillos para facilitar el aprendizaje y uso.
\item
Mantener baja la extensión de la definición de la API.
\item
%Modelado a nivel de SoC:
Dar soporte a la programación de núcleos de procesamiento y periféricos, utilizando los modos más comunes de funcionamiento de los mismos, con un nivel de abstracción suficiente para independizarse del hardware, pero manteniendo la identidad y conceptos de cada cada periférico.
\item
Debe especificar las dependencias entre módulos de la biblioteca, y el uso de recursos físicos en cada implementación particular.
\end{itemize}

%------------------------------------------------------------------------------
\subsection{Módulo de sAPI}

Cada módulo de biblioteca sAPI define:

\begin{itemize}
\item
Nombre del módulo.
\item
Descripción. Se utiliza para la generación de documentación.
\item
Versión del módulo. Se utiliza versionado semántico [].
\item
Autor del módulo. Se debe completar nombres, apellidos y dirección de correo electrónico del autor. 
\item
Licencia. Se puede completar con el texto completo de la licencia del módulo o un enlace a la misma. Los módulos sAPI utilizan la licencia de código abierto \emph{BSD-3clause} [].
\item
Dependencias. Una lista de los módulos de sAPI de los cuales depende el módulo actual. Se puede además exigir que la dependencia sea a una versión específica, a partir de una versión mínima o hasta cierta versión máxima.
\end{itemize}
% falta inherits y métodos de clases

Además, define un conjunto de tipos de datos, constantes, propiedades y métodos.

En los módulos de sAPI se encuentran las siguientes categorías de propiedades (o atributos):

\begin{itemize}
\item
Confiuración: corresponde a las propiedades para la configuración de modos de funcionamiento de un módulo. Por ejemplo, \emph{power}, \emph{clockSource}, etc.
\item
Valor: un cierto valor que se puede leer o escribir en un módulo.
\item
Eventos: representa los eventos que controla el módulo.
\end{itemize}
%polling_events (List)
%interrupt_events (List)
%event_callbacks (List)

Todos los módulos poseen los siguientes métodos:

\begin{itemize}
\item
\emph{init} (inicialización): es un método para inicializar el módulo. Permite establecer múltiples parámetros de configuración.
\item
\emph{read} (leer): permite leer el valor característico del módulo.
\item
\emph{write} (escribir): permite escribir un valor característico del módulo.
\item
\emph{deinit} (restablecer configuración): es un método para restablecer el módulo a la configuración por defecto.
\item
\emph{interrupt}: es un método para habilitar/deshabilitar interrupciones del módulo.
\item
\emph{getters y settes} de cada propiedad.
\end{itemize}

Se destaca que en los lenguajes no orientados a objetos en lugar de métodos se tiene funciones y, por lo tanto, se deberá agregar en cada una el parámetro \emph{this} que corresponde a una referencia al objeto sobre el cual se ejecuta el método.

%------------------------------------------------------------------------------
\subsection{Módulo DataTypes}

Define constantes y tipos de datos primitivos, debido a eso todos los demás módulos de la biblioteca sAPI dependen de este módulo.

Constantes:

\begin{itemize}
\item
Estados lógicos: \emph{TRUE} y \emph{FALSE}.
\item
Estados funcionales: \emph{ON} y \emph{OFF}.
\item
Estados eléctricos: \emph{HIGH} y \emph{LOW}.
\item
Estados de habilitación: \emph{ENABLE} y \emph{DISABLE}.
\end{itemize}

Tipos de datos primitivos: 

\begin{itemize}
\item
Booleano: \emph{bool\_t}. Cualquiera de las constantes definidas previamente se considera un valor booleano válido, además de 0 y !0 (cualquier valor distinto de 0).
\item
Enteros con signo, tienen un rango de valores de $-2^{(N-1)}$ a $2^{(N-1)} - 1$, (donde N = número de bits) y formato complemento a 2. Estos son: \emph{int8\_t}, \emph{int16\_t}, \emph{int32\_t} e \emph{int64\_t}.
\item
Enteros sin signo, con rango de valores de $0$ a $2^{N} - 1$. Estos son: \emph{uint8\_t} (\emph{byte\_t}), \emph{uint16\_t} (\emph{word\_t}), \emph{uint32\_t} (\emph{lword\_t}) y \emph{uint64\_t} (\emph{dword\_t}).
\item
Floatantes: representa valores con punto flotante IEEE-754. Estos son \emph{float32\_t} y \emph{float64\_t}.
%\item
%Vacío: \emph{void\_t}. Representa el nulo de los tipos de datos. Se utiliza para los métodos que no retornan nada.
%\item
%Error: \emph{Error\_t}. Representa valores de error.
\end{itemize}

Tipos de datos para temporización:

\begin{itemize}
\item
\emph{Time\_ms\_t}, representa un lapso de tiempo (duración) en milisegundos (se almacena internamente como uint64\_t).
\item
\emph{Time\_ns\_t}, representa un lapso de tiempo en nanosegundos (se almacena internamente como uint64\_t).
\item
\emph{TimeOfDay\_t}, representa un valor de tiempo absoluto en horas, minutos, segundos y milisegundos. El rango es de $00:00:00.000$ a $23:59:59.999$.
\item
\emph{Date\_t}, representa una fecha (año, mes y día).
\item
\emph{DateAndTime\_t}, que contiene ambos valores anteriores.
\item
\emph{Date\_t}, representa una fecha (año, mes y día).
\end{itemize}

Tipo de datos para manejo de eventos:

\begin{itemize}
\item
\emph{Callback}: \emph{Callback\_t}. Representa a una función a llamar en respuesta a un evento.
\item
Parámetros de \emph{Callback}: \emph{CallbackParams\_t}. Representa los parámetros de una función a llamar en respuesta a un evento.
\end{itemize}

Tipo de datos para manejo de cadenas de caracteres:

\begin{itemize}
\item
\emph{String\_t}.
\end{itemize}

\input{Chapters/Diseno/ModelGPIO}

\input{Chapters/Diseno/ModelADC}
\input{Chapters/Diseno/ModelDAC}

\input{Chapters/Diseno/ModelUART}
\input{Chapters/Diseno/ModelSPI}
\input{Chapters/Diseno/ModelI2C}

\input{Chapters/Diseno/ModelRTC}
\input{Chapters/Diseno/ModelTimer}

\input{Chapters/Diseno/ModelCore}

